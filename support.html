<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gittertier Pro Support</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
    :root {
        --color-bg: #ffffff;
        --color-text: #111111;
        --color-text-muted: #6b7280;
        --color-border: #e5e7eb;
        --color-accent: #2563eb;
        --color-accent-hover: #1d4ed8;
        --color-success: #16a34a;
        --color-error: #dc2626;
        --color-warning: #f59e0b;
        --color-overlay: rgba(0, 0, 0, 0.5);
        --color-tutorial: #FF9900;
        --color-tutorial-light: #FFF3CD;
        
        --radius: 12px;
        --radius-sm: 6px;
        --shadow: 0 1px 3px rgba(0, 0, 0, 0.07), 0 1px 2px rgba(0, 0, 0, 0.04);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --focus-ring: 0 0 0 3px rgba(37, 99, 235, 0.35);
        
        --spacing-xs: 4px;
        --spacing-sm: 8px;
        --spacing-md: 16px;
        --spacing-lg: 24px;
        --spacing-xl: 32px;
        --spacing-xxl: 48px;
        
        --transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
        --transition-slow: all 0.3s cubic-bezier(0.2, 0, 0, 1);
        
        --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Inter, Roboto, "Helvetica Neue", Arial, sans-serif;
        --text-xs: 0.75rem;
        --text-sm: 0.875rem;
        --text-base: 1rem;
        --text-lg: 1.125rem;
        --text-xl: 1.25rem;
        --text-2xl: 1.5rem;
        --text-3xl: 1.875rem;
        
        --header-height: 64px;
        --footer-height: 80px;
        
        /* AI-specific colors */
        --ai-primary: #6e45e2;
        --ai-secondary: #88d3ce;
        --ai-gradient: linear-gradient(135deg, #6e45e2, #88d3ce);
        --ai-bubble-user: #f0f4ff;
        --ai-bubble-ai: #f8f9fa;
        
        /* Response colors for multiple questions */
        --response-color-1: #6e45e2;
        --response-color-2: #2563eb;
        --response-color-3: #16a34a;
        --response-color-4: #f59e0b;
        --response-color-5: #dc2626;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: var(--font-family);
        background-color: var(--color-bg);
        color: var(--color-text);
        line-height: 1.5;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    /* Header Styles */
    header {
        height: var(--header-height);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 var(--spacing-lg);
        border-bottom: 1px solid var(--color-border);
        background-color: var(--color-bg);
        position: sticky;
        top: 0;
        z-index: 50;
    }

    .logo {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        font-weight: 700;
        font-size: var(--text-xl);
    }

    .logo i {
        font-size: var(--text-xl);
        color: var(--color-accent);
    }

    .header-controls {
        display: flex;
        gap: var(--spacing-md);
    }

    /* Main Content */
    main {
        flex: 1;
        max-width: 1200px;
        margin: 0 auto;
        padding: var(--spacing-xl) var(--spacing-lg);
        width: 100%;
    }

    .section {
        margin-bottom: var(--spacing-xl);
    }

    .section-title {
        font-size: var(--text-2xl);
        font-weight: 600;
        margin-bottom: var(--spacing-md);
        color: var(--color-text);
        text-align: center;
    }

    .section-subtitle {
        font-size: var(--text-lg);
        color: var(--color-text-muted);
        text-align: center;
        max-width: 800px;
        margin: 0 auto var(--spacing-xl);
    }

    /* Content Grid */
    .content-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--spacing-lg);
        margin-top: var(--spacing-lg);
    }

    /* Feature Card */
    .feature-card {
        background: var(--color-bg);
        border-radius: var(--radius);
        border: 1px solid var(--color-border);
        padding: var(--spacing-lg);
        box-shadow: var(--shadow);
        transition: var(--transition);
        height: 100%;
        display: flex;
        flex-direction: column;
    }

    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-md);
    }

    .feature-card i {
        font-size: 2.5rem;
        color: var(--color-accent);
        margin-bottom: var(--spacing-md);
        transition: var(--transition);
    }

    .feature-card:hover i {
        transform: scale(1.1);
    }

    .feature-card h3 {
        font-size: var(--text-lg);
        font-weight: 600;
        margin-bottom: var(--spacing-md);
        color: var(--color-text);
    }

    .feature-card p {
        color: var(--color-text-muted);
        line-height: 1.6;
    }

    /* Rainbow AI Button */
    .ai-button {
        position: fixed;
        bottom: var(--spacing-xl);
        right: var(--spacing-xl);
        z-index: 100;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(45deg, #ff0000, #ff8000, #ffff00, #80ff00, #00ff00, #00ffff, #0000ff, #8000ff, #ff00ff, #ff0080);
        background-size: 1000% 1000%;
        animation: rainbow 10s ease infinite;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: var(--text-xl);
        cursor: pointer;
        box-shadow: var(--shadow-md);
        border: none;
        transition: var(--transition);
    }

    .ai-button:hover {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    @keyframes rainbow {
        0% { background-position: 0% 50% }
        50% { background-position: 100% 50% }
        100% { background-position: 0% 50% }
    }

    /* AI Modal */
    .ai-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--color-overlay);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        padding: var(--spacing-lg);
    }

    .ai-modal-content {
        background-color: var(--color-bg);
        border-radius: var(--radius);
        width: 100%;
        max-width: 900px;
        height: 80vh;
        display: flex;
        flex-direction: column;
        box-shadow: var(--shadow-md);
        overflow: hidden;
        animation: scaleIn 0.3s cubic-bezier(0.2, 0, 0, 1);
    }

    .ai-header {
        padding: var(--spacing-lg);
        background: var(--ai-gradient);
        color: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .ai-title {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        font-weight: 700;
        font-size: var(--text-lg);
    }

    .ai-close {
        background: none;
        border: none;
        color: white;
        font-size: var(--text-xl);
        cursor: pointer;
        padding: var(--spacing-xs);
        border-radius: var(--radius-sm);
        transition: var(--transition);
    }

    .ai-close:hover {
        background-color: rgba(255, 255, 255, 0.2);
    }

    .ai-chat-container {
        flex: 1;
        overflow-y: auto;
        padding: var(--spacing-lg);
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
    }

    .ai-message {
        max-width: 80%;
        padding: var(--spacing-md) var(--spacing-lg);
        border-radius: var(--radius);
        animation: fadeIn 0.3s ease;
    }

    .ai-message.user {
        align-self: flex-end;
        background-color: var(--ai-bubble-user);
        border-bottom-right-radius: var(--radius-sm);
    }

    .ai-message.ai {
        align-self: flex-start;
        background-color: var(--ai-bubble-ai);
        border-bottom-left-radius: var(--radius-sm);
        border: 1px solid var(--color-border);
    }

    .ai-message.ai.warning {
        background-color: #fff5f5;
        border-color: var(--color-error);
        border-width: 2px;
    }

    .ai-message.ai.blocked {
        background-color: #fef2f2;
        border-color: var(--color-error);
        border-width: 3px;
    }

    .ai-input-container {
        padding: var(--spacing-lg);
        border-top: 1px solid var(--color-border);
        display: flex;
        gap: var(--spacing-md);
        background-color: var(--color-bg);
    }

    .ai-input {
        flex: 1;
        padding: var(--spacing-md);
        border: 1px solid var(--color-border);
        border-radius: var(--radius);
        font-size: var(--text-base);
        resize: none;
        min-height: 50px;
        max-height: 150px;
        transition: var(--transition);
    }

    .ai-input:focus {
        outline: none;
        border-color: var(--ai-primary);
        box-shadow: var(--focus-ring);
    }

    .ai-send {
        background-color: var(--ai-primary);
        color: white;
        border: none;
        border-radius: var(--radius);
        padding: var(--spacing-md) var(--spacing-lg);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
    }

    .ai-send:hover {
        background-color: var(--color-accent-hover);
    }

    .ai-suggestions {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-md);
        margin-top: var(--spacing-lg);
    }

    .ai-suggestion {
        padding: var(--spacing-md);
        background-color: var(--ai-bubble-ai);
        border: 1px solid var(--color-border);
        border-radius: var(--radius);
        cursor: pointer;
        transition: var(--transition);
        text-align: left;
        font-size: var(--text-sm);
    }

    .ai-suggestion:hover {
        background-color: var(--ai-bubble-user);
        transform: translateY(-2px);
    }

    .ai-typing {
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
        color: var(--color-text-muted);
        font-style: italic;
        margin-top: var(--spacing-md);
    }

    .ai-typing-dot {
        width: 6px;
        height: 6px;
        background-color: var(--color-text-muted);
        border-radius: 50%;
        animation: typing 1.4s infinite both;
    }

    .ai-typing-dot:nth-child(2) {
        animation-delay: 0.2s;
    }

    .ai-typing-dot:nth-child(3) {
        animation-delay: 0.4s;
    }

    @keyframes typing {
        0%, 60%, 100% { transform: translateY(0); }
        30% { transform: translateY(-5px); }
    }

    .ai-sources {
        margin-top: var(--spacing-md);
        padding: var(--spacing-md);
        background-color: rgba(110, 69, 226, 0.05);
        border-radius: var(--radius);
        border-left: 3px solid var(--ai-primary);
    }

    .ai-sources-title {
        font-weight: 600;
        margin-bottom: var(--spacing-xs);
        color: var(--ai-primary);
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
    }

    .ai-source-item {
        margin-top: var(--spacing-xs);
        font-size: var(--text-sm);
        color: var(--color-text-muted);
        cursor: pointer;
        transition: var(--transition);
        padding: var(--spacing-xs);
        border-radius: var(--radius-sm);
    }

    .ai-source-item:hover {
        background-color: rgba(110, 69, 226, 0.1);
        color: var(--ai-primary);
    }

    /* Instagram Banner */
    .instagram-banner {
        background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d);
        color: white;
        padding: var(--spacing-md);
        border-radius: var(--radius);
        margin-top: var(--spacing-md);
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--spacing-sm);
        box-shadow: var(--shadow);
    }

    .instagram-banner a {
        color: white;
        font-weight: 600;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        padding: var(--spacing-sm) var(--spacing-md);
        background: rgba(255, 255, 255, 0.2);
        border-radius: 30px;
        transition: var(--transition);
    }

    .instagram-banner a:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
    }

    /* Multi-question response styling */
    .multi-response {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
    }

    .response-section {
        padding: var(--spacing-md);
        border-radius: var(--radius-sm);
        border-left: 4px solid var(--response-color-1);
        background-color: rgba(110, 69, 226, 0.05);
    }

    .response-section:nth-child(2) {
        border-left-color: var(--response-color-2);
        background-color: rgba(37, 99, 235, 0.05);
    }

    .response-section:nth-child(3) {
        border-left-color: var(--response-color-3);
        background-color: rgba(22, 163, 74, 0.05);
    }

    .response-section:nth-child(4) {
        border-left-color: var(--response-color-4);
        background-color: rgba(245, 158, 11, 0.05);
    }

    .response-section:nth-child(5) {
        border-left-color: var(--response-color-5);
        background-color: rgba(220, 38, 38, 0.05);
    }

    .response-question {
        font-weight: 600;
        margin-bottom: var(--spacing-xs);
        color: var(--color-text);
    }

    /* Contact Banner */
    .contact-banner {
        background: linear-gradient(135deg, #2563eb, #1d4ed8);
        color: white;
        padding: var(--spacing-md);
        border-radius: var(--radius);
        margin-top: var(--spacing-md);
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--spacing-sm);
        box-shadow: var(--shadow);
    }

    .contact-banner a {
        color: white;
        font-weight: 600;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        padding: var(--spacing-sm) var(--spacing-md);
        background: rgba(255, 255, 255, 0.2);
        border-radius: 30px;
        transition: var(--transition);
    }

    .contact-banner a:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
    }

    /* Block Modal */
    .block-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.95);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: var(--spacing-lg);
    }

    .block-modal-content {
        background-color: var(--color-bg);
        border-radius: var(--radius);
        padding: var(--spacing-xl);
        width: 100%;
        max-width: 500px;
        text-align: center;
        box-shadow: var(--shadow-md);
        animation: shake 0.5s ease;
        border: 3px solid var(--color-error);
        position: relative;
    }

    .block-icon {
        font-size: 4rem;
        color: var(--color-error);
        margin-bottom: var(--spacing-lg);
    }

    .block-title {
        font-size: var(--text-2xl);
        font-weight: 700;
        margin-bottom: var(--spacing-md);
        color: var(--color-error);
    }

    .block-message {
        margin-bottom: var(--spacing-xl);
        line-height: 1.6;
    }

    .block-timer {
        font-size: var(--text-xl);
        font-weight: 700;
        color: var(--color-error);
        margin-bottom: var(--spacing-xl);
    }

    .block-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1999;
        display: none;
    }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
    }

    /* Sources Modal */
    .sources-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--color-overlay);
        z-index: 1010;
        align-items: center;
        justify-content: center;
        padding: var(--spacing-lg);
    }

    .sources-modal-content {
        background-color: var(--color-bg);
        border-radius: var(--radius);
        width: 100%;
        max-width: 700px;
        max-height: 80vh;
        overflow-y: auto;
        padding: var(--spacing-xl);
        box-shadow: var(--shadow-md);
        animation: scaleIn 0.3s cubic-bezier(0.2, 0, 0, 1);
        position: relative;
    }

    .sources-close {
        position: absolute;
        top: var(--spacing-md);
        right: var(--spacing-md);
        background: none;
        border: none;
        font-size: var(--text-xl);
        color: var(--color-text-muted);
        cursor: pointer;
        padding: var(--spacing-xs);
        border-radius: var(--radius-sm);
        transition: var(--transition);
    }

    .sources-close:hover {
        color: var(--color-error);
        background-color: rgba(220, 38, 38, 0.1);
    }

    .sources-title {
        font-size: var(--text-xl);
        font-weight: 600;
        margin-bottom: var(--spacing-lg);
        color: var(--ai-primary);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
    }

    .source-detail {
        margin-bottom: var(--spacing-xl);
        padding: var(--spacing-md);
        background-color: #f9fafb;
        border-radius: var(--radius);
        border-left: 3px solid var(--ai-primary);
    }

    .source-detail-title {
        font-weight: 600;
        margin-bottom: var(--spacing-xs);
        color: var(--color-text);
    }

    .source-detail-content {
        color: var(--color-text-muted);
        font-size: var(--text-sm);
        line-height: 1.6;
        margin-bottom: var(--spacing-md);
    }

    .source-detail-reason {
        padding: var(--spacing-md);
        background-color: rgba(110, 69, 226, 0.05);
        border-radius: var(--radius-sm);
        font-size: var(--text-xs);
        color: var(--ai-primary);
    }

    /* Source Banner Styles */
    .source-banner {
        margin-top: var(--spacing-md);
        padding: var(--spacing-md);
        border-radius: var(--radius-sm);
        background-color: #f0f4ff;
        border-left: 3px solid var(--color-accent);
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
    }

    .source-banner-icon {
        font-size: 1.5rem;
        color: var(--color-accent);
    }

    .source-banner-content {
        flex: 1;
    }

    .source-banner-title {
        font-weight: 600;
        margin-bottom: var(--spacing-xs);
        color: var(--color-accent);
    }

    .source-banner-text {
        font-size: var(--text-sm);
        color: var(--color-text-muted);
    }

    .source-banner-button {
        background-color: var(--color-accent);
        color: white;
        border: none;
        border-radius: var(--radius-sm);
        padding: var(--spacing-sm) var(--spacing-md);
        font-size: var(--text-xs);
        cursor: pointer;
        transition: var(--transition);
        white-space: nowrap;
    }

    .source-banner-button:hover {
        background-color: var(--color-accent-hover);
    }

    /* Topic-specific icons */
    .topic-icon {
        margin-right: var(--spacing-sm);
        font-size: 1.2em;
    }

    .payment-icon {
        color: #16a34a;
    }

    .scanner-icon {
        color: #2563eb;
    }

    .product-icon {
        color: #f59e0b;
    }

    .instagram-icon {
        color: #e1306c;
    }

    .tutorial-icon {
        color: #6e45e2;
    }

    .support-icon {
        color: #dc2626;
    }

    /* Animation Keyframes */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes scaleIn {
        from { transform: scale(0.95); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

    /* Mobile Optimization - Enhanced */
    @media (max-width: 768px) {
        .ai-modal-content {
            height: 100%;
            width: 100%;
            max-width: none;
            border-radius: 0;
            margin: 0;
        }
        
        .ai-message {
            max-width: 90%;
        }
        
        .ai-suggestions {
            grid-template-columns: 1fr;
        }
        
        .ai-button {
            bottom: var(--spacing-md);
            right: var(--spacing-md);
            width: 50px;
            height: 50px;
        }

        .content-grid {
            grid-template-columns: 1fr;
        }

        header {
            padding: 0 var(--spacing-md);
        }
        
        .logo {
            font-size: var(--text-lg);
        }
        
        main {
            padding: var(--spacing-md);
        }
        
        .section-title {
            font-size: var(--text-xl);
        }
        
        .section-subtitle {
            font-size: var(--text-base);
        }
        
        .ai-header {
            padding: var(--spacing-md);
        }
        
        .ai-chat-container {
            padding: var(--spacing-md);
        }
        
        .ai-input-container {
            padding: var(--spacing-md);
            flex-direction: column;
        }
        
        .ai-send {
            width: 100%;
        }
        
        /* Improved mobile input */
        .ai-input {
            min-height: 60px;
            font-size: 16px; /* Prevents zoom on iOS */
        }
        
        /* Mobile-friendly suggestions */
        .ai-suggestion {
            padding: var(--spacing-sm);
            text-align: center;
        }
        
        /* Better spacing for mobile */
        .section {
            margin-bottom: var(--spacing-lg);
        }

        /* Fullscreen for mobile */
        .ai-modal {
            padding: 0;
        }
    }

    @media (max-width: 480px) {
        :root {
            --spacing-lg: 16px;
            --spacing-xl: 20px;
            --header-height: 56px;
        }
        
        main {
            padding: var(--spacing-sm);
        }
        
        .section-title {
            font-size: var(--text-lg);
        }
        
        .section-subtitle {
            font-size: var(--text-sm);
        }
        
        .feature-card {
            padding: var(--spacing-md);
        }
        
        .feature-card i {
            font-size: 2rem;
        }
        
        /* Improved touch targets */
        .control-btn, .action-btn {
            min-height: 44px;
        }
        
        /* Better mobile header */
        .header-controls {
            gap: var(--spacing-sm);
        }
        
        .logo span {
            font-size: var(--text-lg);
        }
    }

    /* Dark mode support for system preference */
    @media (prefers-color-scheme: dark) {
        :root {
            --color-bg: #111827;
            --color-text: #f3f4f6;
            --color-text-muted: #9ca3af;
            --color-border: #374151;
            --ai-bubble-user: #1f2937;
            --ai-bubble-ai: #1a202c;
        }
        
        body {
            background-color: var(--color-bg);
        }
        
        .source-detail {
            background-color: #1f2937;
        }
        
        .ai-input {
            background-color: #1f2937;
            color: var(--color-text);
            border-color: var(--color-border);
        }

        .ai-message.ai.warning {
            background-color: #2a1a1a;
        }

        .ai-message.ai.blocked {
            background-color: #2a1a1a;
        }

        .response-section {
            background-color: rgba(110, 69, 226, 0.1);
        }

        .response-section:nth-child(2) {
            background-color: rgba(37, 99, 235, 0.1);
        }

        .response-section:nth-child(3) {
            background-color: rgba(22, 163, 74, 0.1);
        }

        .response-section:nth-child(4) {
            background-color: rgba(245, 158, 11, 0.1);
        }

        .response-section:nth-child(5) {
            background-color: rgba(220, 38, 38, 0.1);
        }
        
        .source-banner {
            background-color: #1e293b;
            border-left-color: var(--ai-primary);
        }
    }
    </style>
</head>
<body>
    <!-- Header and main content remain exactly the same -->
    <header>
        <div class="logo">
            <i class="fas fa-shopping-cart"></i>
            <span>Gittertier Pro Support</span>
        </div>
        <div class="header-controls">
            <button class="action-btn" onclick="window.location.href='index'">
                <i class="fas fa-arrow-left"></i>
                Zur√ºck
            </button>
        </div>
    </header>
    
    <main>
        <section class="section fade-in">
            <h2 class="section-title">Willkommen beim Gittertier Pro Support</h2>
            <p class="section-subtitle">Hier finden Sie Hilfe zu allen Fragen rund um Gittertier Pro. Unser KI-Assistent steht Ihnen jederzeit zur Verf√ºgung.</p>
            
            <div class="content-grid">
                <div class="feature-card">
                    <i class="fas fa-robot"></i>
                    <h3>KI-Assistent</h3>
                    <p>Unser intelligenter Assistent beantwortet Ihre Fragen zu Gittertier Pro basierend auf der Dokumentation und den vorhandenen Dateien.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-book"></i>
                    <h3>Dokumentation</h3>
                    <p>Umfassende Informationen zu allen Funktionen, Einstellungen und M√∂glichkeiten von Gittertier Pro.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-question-circle"></i>
                    <h3>H√§ufige Fragen</h3>
                    <p>Antworten auf die am h√§ufigsten gestellten Fragen zu Installation, Einrichtung und Fehlerbehebung.</p>
                </div>
            </div>
        </section>
        
        <section class="section fade-in">
            <h2 class="section-title">H√§ufige Fragen</h2>
            
            <div class="content-grid">
                <div class="feature-card">
                    <h3>Wie starte ich den Scanner?</h3>
                    <p>Klicken Sie auf den "Scanner starten" Button auf der Hauptseite. Stellen Sie sicher, dass Sie Kamera-Zugriff erlauben.</p>
                </div>
                
                <div class="feature-card">
                    <h3>Wie f√ºge ich Produkte manuell hinzu?</h3>
                    <p>Nutzen Sie den "Manuell" Button unter dem Scanner. Sie ben√∂tigen dazu Administrator-Rechte.</p>
                </div>
                
                <div class="feature-card">
                    <h3>Wie generiere ich einen QR-Code zur Bezahlung?</h3>
                    <p>F√ºgen Sie Produkte zum Warenkorb hinzu und klicken Sie auf "Bezahlen", um einen QR-Code zu generieren.</p>
                </div>
                
                <div class="feature-card">
                    <h3>Wie aktiviere ich den Dark Mode?</h3>
                    <p>Gittertier Pro unterst√ºtzt systemeigenen Dark Mode. Aktivieren Sie ihn in Ihren Systemeinstellungen.</p>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Rainbow AI Button -->
    <button class="ai-button" onclick="openAIModal()">
        <i class="fas fa-robot"></i>
    </button>
    
    <!-- AI Modal -->
    <div class="ai-modal" id="aiModal">
        <div class="ai-modal-content">
            <div class="ai-header">
                <div class="ai-title">
                    <i class="fas fa-robot"></i>
                    <span>Gittertier AI Assistant</span>
                </div>
                <button class="ai-close" onclick="closeAIModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="ai-chat-container" id="chatContainer">
                <div class="ai-message ai">
                    <p>Hallo! Ich bin der Gittertier AI Assistant. Ich kann Ihnen bei Fragen zu Gittertier Pro helfen. Was m√∂chten Sie wissen?</p>
                    
                    <div class="ai-suggestions">
                        <button class="ai-suggestion" onclick="askQuestion('Wie funktioniert der Scanner?')">
                            Wie funktioniert der Scanner?
                        </button>
                        <button class="ai-suggestion" onclick="askQuestion('Wie f√ºge ich Produkte hinzu?')">
                            Wie f√ºge ich Produkte hinzu?
                        </button>
                        <button class="ai-suggestion" onclick="askQuestion('Was ist Gittertier Pro?')">
                            Was ist Gittertier Pro?
                        </button>
                        <button class="ai-suggestion" onclick="askQuestion('Wie bezahle ich mit QR-Code?')">
                            Wie bezahle ich mit QR-Code?
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="ai-input-container">
                <textarea class="ai-input" id="aiInput" placeholder="Fragen Sie etwas √ºber Gittertier Pro..." rows="1"></textarea>
                <button class="ai-send" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                    Senden
                </button>
            </div>
        </div>
    </div>
    
    <!-- Block Modal -->
    <div class="block-modal" id="blockModal">
        <div class="block-modal-content">
            <div class="block-icon">
                <i class="fas fa-ban"></i>
            </div>
            <h2 class="block-title">Zugang vor√ºbergehend gesperrt</h2>
            <p class="block-message">Sie haben sich nicht angemessen verhalten. Der Zugang zum KI-Assistenten wurde f√ºr 5 Minuten gesperrt.</p>
            <div class="block-timer" id="blockTimer">05:00</div>
            <button class="modal-btn primary" onclick="location.reload()">
                <i class="fas fa-redo"></i>
                Seite neu laden
            </button>
        </div>
    </div>
    
    <!-- Block Overlay -->
    <div class="block-overlay" id="blockOverlay"></div>
    
    <!-- Sources Modal -->
    <div class="sources-modal" id="sourcesModal">
        <div class="sources-modal-content">
            <button class="sources-close" onclick="closeSourcesModal()">
                <i class="fas fa-times"></i>
            </button>
            
            <h2 class="sources-title">
                <i class="fas fa-file-alt"></i>
                Quellenangaben
            </h2>
            
            <div id="sourcesContent">
                <!-- Sources will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Enhanced AI Knowledge Base with 70+ question-answer pairs
        const knowledgeBase = {
            // General questions
            "was ist gittertier pro": {
                answer: "Gittertier Pro ist eine revolution√§re Kassensoftware, die speziell f√ºr den modernen Einzelhandel entwickelt wurde. Sie vereinfacht Prozesse, steigert Effizienz und verbessert Kundenerlebnisse durch intuitive Bedienung, Echtzeit-Synchronisation und optimierte Performance auf allen Ger√§ten.",
                sources: [
                    {
                        file: "about",
                        content: "Eine revolution√§re Kassensoftware, die speziell f√ºr den modernen Einzelhandel entwickelt wurde, um Prozesse zu vereinfachen, Effizienz zu steigern und Kundenerlebnisse zu verbessern.",
                        reason: "Enth√§lt die Hauptbeschreibung von Gittertier Pro"
                    }
                ],
                icon: "fas fa-shopping-cart"
            },
            "wie funktioniert gittertier pro": {
                answer: "Gittertier Pro kombiniert intuitive Bedienung mit leistungsstarken Funktionen. Die Software erm√∂glicht das Scannen von Produkten, Verwaltung des Warenkorbs, Generierung von QR-Codes f√ºr Zahlungen und bietet Echtzeit-Synchronisation zwischen allen Ger√§ten. Sie ist cloud-basiert und ben√∂tigt keine aufw√§ndige Server-Infrastruktur.",
                sources: [
                    {
                        file: "about",
                        content: "Gittertier Pro kombiniert intuitive Bedienung mit leistungsstarken Funktionen. Keine langen Einarbeitungszeiten, keine komplexen Men√ºs - einfach einscannen, bezahlen, fertig.",
                        reason: "Beschreibt die Kernfunktionalit√§t"
                    },
                    {
                        file: "index",
                        content: "Scanner-Funktionalit√§t, Warenkorb-Verwaltung und QR-Generierung",
                        reason: "Zeigt die Hauptfunktionen der App"
                    }
                ],
                icon: "fas fa-cogs"
            },
            
            // Scanner functionality
            "wie starte ich den scanner": {
                answer: "Um den Scanner zu starten, klicken Sie auf den 'Scanner starten' Button auf der Hauptseite. Stellen Sie sicher, dass Sie Kamera-Zugriff erlauben, wenn Ihr Browser danach fragt. Der Scanner erkennt automatisch Barcodes und zeigt die erkannten Produkte an.",
                sources: [
                    {
                        file: "index",
                        content: "Scanner Initialization and toggleScanner function",
                        reason: "Enth√§lt den Code f√ºr die Scanner-Funktionalit√§t"
                    }
                ],
                icon: "fas fa-camera"
            },
            "scanner funktioniert nicht": {
                answer: "Wenn der Scanner nicht funktioniert, pr√ºfen Sie folgende Punkte: 1) Haben Sie Kamera-Zugriff erlaubt? 2) Funktioniert Ihre Kamera mit anderen Apps? 3) Ist ausreichend Licht vorhanden? 4) Probieren Sie, den Scanner neu zu starten. Wenn Probleme bestehen, k√∂nnen Sie Produkte auch manuell hinzuf√ºgen.",
                sources: [
                    {
                        file: "index",
                        content: "Scanner error handling and fallback options",
                        reason: "Behandelt Scanner-Fehler und bietet Alternativen"
                    }
                ],
                icon: "fas fa-camera"
            },
            "scanner erkennt keine barcodes": {
                answer: "Wenn der Scanner keine Barcodes erkennt, pr√ºfen Sie: 1) Kamera-Zugriff erlaubt, 2) Ausreichende Beleuchtung, 3) Saubere Kameralinse, 4) Korrekte Haltung des Barcodes. Als Alternative k√∂nnen Sie Produkte manuell hinzuf√ºgen.",
                sources: [
                    {
                        file: "index",
                        content: "Barcode scanning troubleshooting",
                        reason: "Bietet L√∂sungen f√ºr Scanner-Probleme"
                    }
                ],
                icon: "fas fa-camera"
            },
            
            // Product management
            "wie f√ºge ich produkte hinzu": {
                answer: "Sie k√∂nnen Produkte auf zwei Wegen hinzuf√ºgen: 1) Durch Scannen des Barcodes mit dem Scanner oder 2) Manuelles Hinzuf√ºgen √ºber den 'Manuell' Button. Beim manuellen Hinzuf√ºgen ben√∂tigen Sie Administrator-Rechte und geben Produktname, Preis und optional einen Barcode ein.",
                sources: [
                    {
                        file: "index",
                        content: "showProductModal and saveProduct functions",
                        reason: "Implementiert die manuelle Produkterfassung"
                    }
                ],
                icon: "fas fa-cube"
            },
            "produkt nicht gefunden": {
                answer: "Wenn ein Produkt nicht gefunden wird, k√∂nnen Sie es manuell hinzuf√ºgen. Klicken Sie dazu auf den 'Manuell' Button unter dem Scanner und geben Sie die Produktdetails ein. Das Produkt wird dann in Ihrer lokalen Datenbank gespeichert und beim n√§chsten Scan erkannt.",
                sources: [
                    {
                        file: "index",
                        content: "handleBarcode function with fallback to manual product addition",
                        reason: "Behandelt den Fall, wenn ein Produkt nicht erkannt wird"
                    }
                ],
                icon: "fas fa-cube"
            },
            
            // Payment process
            "wie bezahle ich mit qr code": {
                answer: "Um mit QR-Code zu bezahlen, f√ºgen Sie zun√§chst Produkte zum Warenkorb hinzu. Klicken Sie dann auf den 'Bezahlen' Button unten auf der Seite. Es wird ein QR-Code generiert, den der Kunde mit seinem Smartphone scannen kann. Der Kunde wird zur Bezahlseite weitergeleitet, wo die Zahlung abgeschlossen wird.",
                sources: [
                    {
                        file: "index",
                        content: "generateQR function and payment process",
                        reason: "Implementiert die QR-Generierung f√ºr Zahlungen"
                    },
                    {
                        file: "customer",
                        content: "Complete payment interface for customers",
                        reason: "Zeigt die Kundenseite f√ºr Zahlungen"
                    }
                ],
                icon: "fas fa-qrcode payment-icon"
            },
            "qr code wird nicht generiert": {
                answer: "Wenn der QR-Code nicht generiert wird, stellen Sie sicher, dass sich Produkte im Warenkorb befinden. Bei leeren Warenkorb kann kein QR-Code generiert werden. Pr√ºfen Sie auch, ob JavaScript in Ihrem Browser aktiviert ist, da die QR-Generierung clientseitig erfolgt.",
                sources: [
                    {
                        file: "index",
                        content: "generateQR function with cart validation",
                        reason: "√úberpr√ºft den Warenkorb vor QR-Generierung"
                    }
                ],
                icon: "fas fa-qrcode payment-icon"
            },
            
            // Tutorial and help
            "gibt es ein tutorial": {
                answer: "Ja, Gittertier Pro bietet ein umfassendes Tutorial, das Sie durch alle Funktionen f√ºhrt. Klicken Sie auf das Fragezeichen-Symbol in der Kopfzeile, um das Tutorial zu starten. Es zeigt Ihnen Schritt f√ºr Schritt, wie Sie Produkte scannen, den Warenkorb verwalten und Bezahlvorg√§nge durchf√ºhren.",
                sources: [
                    {
                        file: "index",
                        content: "Tutorial system with step-by-step guidance",
                        reason: "Implementiert das Tutorial-System"
                    }
                ],
                icon: "fas fa-graduation-cap tutorial-icon"
            },
            "tutorial schritte": {
                answer: "Das Gittertier Pro Tutorial besteht aus mehreren Schritte, die Sie durch alle Hauptfunktionen f√ºhren: 1) Header-Bedienelemente, 2) Scanner-Bereich, 3) Scanner starten, 4) Manuelle Eingabe, 5) Produktinformationen, 6) Mengensteuerung, 7) Zum Warenkorb hinzuf√ºgen, 8) Warenkorb, 9) Warenkorb leeren, 10) Bezahlvorgang.",
                sources: [
                    {
                        file: "index",
                        content: "Tutorial steps configuration",
                        reason: "Enth√§lt die Tutorial-Schritt-Definitionen"
                    }
                ],
                icon: "fas fa-graduation-cap tutorial-icon"
            },
            "was verpasse ich im tutorial": {
                answer: "Im Tutorial lernen Sie alle wichtigen Funktionen von Gittertier Pro kennen: Scanner-Bedienung, Produkterfassung, Warenkorbverwaltung und Bezahlabwicklung. Es ist eine ausgezeichnete Einf√ºhrung f√ºr neue Benutzer und zeigt viele n√ºtzliche Tipps und Tricks.",
                sources: [
                    {
                        file: "index",
                        content: "Tutorial steps and content",
                        reason: "Beschreibt den Inhalt des Tutorials"
                    }
                ],
                icon: "fas fa-graduation-cap tutorial-icon"
            },
            
            // Technical questions
            "welche browsers werden unterst√ºtzt": {
                answer: "Gittertier Pro unterst√ºtzt alle modernen Browser mit WebRTC- und Camera API-Unterst√ºtzung. Dazu geh√∂ren Chrome (ab Version 57), Firefox (ab Version 52), Safari (ab Version 11.1) und Edge (ab Version 79). F√ºr den Scanner wird HTTPS ben√∂tigt, da Kamera-Zugriff nur √ºber secure contexts erlaubt ist.",
                sources: [
                    {
                        file: "Multiple files",
                        content: "Use of modern web APIs and technologies",
                        reason: "Die App verwendet moderne Webstandards"
                    }
                ],
                icon: "fas fa-globe"
            },
            
            // Instagram account
            "instagram": {
                answer: "Unser Instagram-Account ist @gittertierpro. Folgen Sie uns, um √ºber Neuigkeiten, Updates und Tipps zur Nutzung von Gittertier Pro informiert zu bleiben.",
                sources: [
                    {
                        file: "about",
                        content: "Folgen Sie uns auf Instagram, um √ºber Neuigkeiten und Updates informiert zu bleiben: @gittertierpro",
                        reason: "Enth√§lt den Instagram-Handle"
                    }
                ],
                icon: "fab fa-instagram instagram-icon"
            },
            "insta": {
                answer: "Unser Instagram-Account ist @gittertierpro. Folgen Sie uns, um √ºber Neuigkeiten, Updates und Tipps zur Nutzung von Gittertier Pro informiert zu bleiben.",
                sources: [
                    {
                        file: "about",
                        content: "Folgen Sie uns auf Instagram, um √ºber Neuigkeiten und Updates informiert zu bleiben: @gittertierpro",
                        reason: "Enth√§lt den Instagram-Handle"
                    }
                ],
                icon: "fab fa-instagram instagram-icon"
            },
            "social media": {
                answer: "Folgen Sie uns auf Instagram (@gittertierpro) f√ºr Neuigkeiten, Updates und Tipps zur Nutzung von Gittertier Pro. Wir posten regelm√§√üig hilfreiche Inhalte f√ºr Einzelh√§ndler.",
                sources: [
                    {
                        file: "about",
                        content: "Instagram reference in about page",
                        reason: "Verweist auf Social Media Pr√§senz"
                    }
                ],
                icon: "fab fa-instagram instagram-icon"
            },
            
            // NEW: Conversational responses
            "hallo": {
                answer: "Hallo! Wie kann ich Ihnen helfen? Sie k√∂nnen mich alles √ºber Gittertier Pro fragen - von der Scanner-Nutzung bis zur Bezahlabwicklung.",
                sources: [
                    {
                        file: "AI Response",
                        content: "Standard greeting response",
                        reason: "Bietet eine freundliche Begr√º√üung"
                    }
                ],
                icon: "fas fa-robot"
            },
            "hi": {
                answer: "Hi there! Ich bin der Gittertier AI Assistant. Fragen Sie mich alles √ºber die Kassensoftware Gittertier Pro.",
                sources: [
                    {
                        file: "AI Response",
                        content: "Informal greeting response",
                        reason: "Bietet eine informelle Begr√º√üung"
                    }
                ],
                icon: "fas fa-robot"
            },
            "guten tag": {
                answer: "Guten Tag! Sch√∂n, dass Sie da sind. Wie kann ich Ihnen mit Gittertier Pro helfen?",
                sources: [
                    {
                        file: "AI Response",
                        content: "Formal greeting response",
                        reason: "Bietet eine formelle Begr√º√üung"
                    }
                ],
                icon: "fas fa-robot"
            },
            "danke": {
                answer: "Gern geschehen! Wenn Sie weitere Fragen haben, stehe ich Ihnen jederzeit zur Verf√ºgung. Viel Erfolg mit Gittertier Pro!",
                sources: [
                    {
                        file: "AI Response",
                        content: "Thanks response",
                        reason: "Reagiert auf Dank"
                    }
                ],
                icon: "fas fa-smile"
            },
            "dankesch√∂n": {
                answer: "Keine Ursache! Bei weiteren Fragen zu Gittertier Pro helfe ich gerne wieder.",
                sources: [
                    {
                        file: "AI Response",
                        content: "Thanks response variation",
                        reason: "Alternative Reaktion auf Dank"
                    }
                ],
                icon: "fas fa-smile"
            },
            "vielen dank": {
                answer: "Immer gerne! Z√∂gern Sie nicht, bei weiteren Fragen zu Gittertier Pro auf mich zuzukommen.",
                sources: [
                    {
                        file: "AI Response",
                        content: "Thanks response variation",
                        reason: "Alternative Reaktion auf Dank"
                    }
                ],
                icon: "fas fa-smile"
            },
            "dank√∂": {
                answer: "Gerne doch! üòä Ich hoffe, ich konnte Ihnen helfen. Bei weiteren Fragen stehe ich zur Verf√ºgung!",
                sources: [
                    {
                        file: "AI Response",
                        content: "Informal thanks response",
                        reason: "Reagiert auf informellen Dank"
                    }
                ],
                icon: "fas fa-smile"
            },
            "tysm": {
                answer: "Kein Problem! üòä Wenn Sie weitere Fragen haben, helfe ich gerne weiter.",
                sources: [
                    {
                        file: "AI Response",
                        content: "English informal thanks response",
                        reason: "Reagiert auf englischen informellen Dank"
                    }
                ],
                icon: "fas fa-smile"
            },
            "tschau": {
                answer: "Auf Wiedersehen! Kommen Sie gerne wieder, wenn Sie weitere Fragen zu Gittertier Pro haben.",
                sources: [
                    {
                        file: "AI Response",
                        content: "Goodbye response",
                        reason: "Verabschiedung"
                    }
                ],
                icon: "fas fa-wave-goodbye"
            },
            "bye": {
                answer: "Bis bald! Bei weiteren Fragen zu Gittertier Pro stehe ich gerne zur Verf√ºgung.",
                sources: [
                    {
                        file: "AI Response",
                        content: "English goodbye response",
                        reason: "Englische Verabschiedung"
                    }
                ],
                icon: "fas fa-wave-goodbye"
            },
            "ciao": {
                answer: "Ciao! Kommen Sie gerne wieder, wenn Sie Hilfe mit Gittertier Pro ben√∂tigen.",
                sources: [
                    {
                        file: "AI Response",
                        content: "Italian goodbye response",
                        reason: "Italienische Verabschiedung"
                    }
                ],
                icon: "fas fa-wave-goodbye"
            },
            "solli": {
                answer: "Hallo! üòä Wie kann ich Ihnen mit Gittertier Pro helfen?",
                sources: [
                    {
                        file: "AI Response",
                        content: "Informal greeting response",
                        reason: "Reagiert auf informelle Begr√º√üung"
                    }
                ],
                icon: "fas fa-robot"
            },
            "bitte": {
                answer: "Gerne helfe ich Ihnen! Was m√∂chten Sie √ºber Gittertier Pro wissen?",
                sources: [
                    {
                        file: "AI Response",
                        content: "Response to 'please'",
                        reason: "Reagiert auf H√∂flichkeitsform"
                    }
                ],
                icon: "fas fa-robot"
            },
            
            // NEW: AI self-knowledge
            "wer bist du": {
                answer: "Ich bin der Gittertier AI Assistant, ein intelligenter Helfer f√ºr die Kassensoftware Gittertier Pro. Ich beantworte Fragen zur Nutzung der Software, zur Fehlerbehebung und zu allen Funktionen.",
                sources: [
                    {
                        file: "support",
                        content: "AI Assistant functionality",
                        reason: "Beschreibt die Rolle des AI-Assistenten"
                    }
                ],
                icon: "fas fa-robot"
            },
            "was kannst du": {
                answer: "Ich kann Fragen zu Gittertier Pro beantworten, bei Problemen helfen, Anleitungen geben und Sie durch die Funktionen der Software f√ºhren. Mein Wissen basiert auf der Dokumentation der Webseite und den vorhandenen Dateien.",
                sources: [
                    {
                        file: "support",
                        content: "AI Assistant capabilities",
                        reason: "Beschreibt die F√§higkeiten des AI-Assistenten"
                    }
                ],
                icon: "fas fa-robot"
            },
            "wie funktionierst du": {
                answer: "Ich analysiere Ihre Fragen und suche nach passenden Antworten in meiner Wissensdatenbank, die auf der Dokumentation von Gittertier Pro basiert. Ich kann mehrere Fragen gleichzeitig verstehen und beantworten.",
                sources: [
                    {
                        file: "support",
                        content: "AI processing logic",
                        reason: "Erkl√§rt die Funktionsweise des AI-Assistenten"
                    }
                ],
                icon: "fas fa-robot"
            },
            "wie hei√üt du": {
                answer: "Ich bin der Gittertier AI Assistant! üòä Ich wurde entwickelt, um Ihnen bei allen Fragen zu Gittertier Pro zu helfen.",
                sources: [
                    {
                        file: "AI Response",
                        content: "Name identification",
                        reason: "Stellt sich vor"
                    }
                ],
                icon: "fas fa-robot"
            },
            "dein name": {
                answer: "Mein Name ist Gittertier AI Assistant. Sie k√∂nnen mich aber auch einfach AI Assistant nennen!",
                sources: [
                    {
                        file: "AI Response",
                        content: "Name identification",
                        reason: "Gibt den Namen an"
                    }
                ],
                icon: "fas fa-robot"
            },
            
            // NEW: About page details
            "was sind die vorteile von gittertier pro": {
                answer: "Gittertier Pro bietet zahlreiche Vorteile: 75% schneller Kassiervorg√§nge, 20% h√∂here Ums√§tze, verbesserte Kundenerfahrung und datenbasierte Entscheidungen durch Echtzeit-Analysen.",
                sources: [
                    {
                        file: "about",
                        content: "Impact section with benefits and statistics",
                        reason: "Listet die Vorteile von Gittertier Pro auf"
                    }
                ],
                icon: "fas fa-chart-line"
            },
            "welche auswirkungen hat gittertier pro": {
                answer: "Gittertier Pro ver√§ndert den Einzelhandel durch schneller Kassiervorg√§nge, h√∂here Ums√§tze, verbesserte Kundenerfahrung und datenbasierte Entscheidungen. Die Software erm√∂glicht 75% schnellere Kassiervorg√§nge und 20% h√∂here Ums√§tze.",
                sources: [
                    {
                        file: "about",
                        content: "Impact section with statistics",
                        reason: "Beschreibt die Auswirkungen von Gittertier Pro"
                    }
                ],
                icon: "fas fa-chart-line"
            },
            
            // NEW: Customer page details
            "wie funktioniert die kundenseite": {
                answer: "Die Kundenseite (customer) erm√∂glicht Kunden, √ºber einen QR-Code zu bezahlen. Nachdem der H√§ndler einen QR-Code generiert hat, scannt der Kunde diesen und wird zur Bezahlseite weitergeleitet, wo die Zahlung best√§tigt wird.",
                sources: [
                    {
                        file: "customer",
                        content: "Customer payment interface and process",
                        reason: "Beschreibt die Kundenseite und den Bezahlvorgang"
                    }
                ],
                icon: "fas fa-user-check"
            },
            "was passiert nach der qr code zahlung": {
                answer: "Nachdem der Kunde den QR-Code gescannt und die Zahlung durchgef√ºhrt hat, erh√§lt der H√§ndler eine Best√§tigung. Der Kunde kann einen Beleg drucken und wird dann zur Startseite zur√ºckgeleitet.",
                sources: [
                    {
                        file: "customer",
                        content: "Payment confirmation and receipt generation",
                        reason: "Beschreibt den Prozess nach der Zahlung"
                    }
                ],
                icon: "fas fa-qrcode payment-icon"
            },
            
            // NEW: Login page details
            "wie melde ich mich an": {
                answer: "F√ºr den Administrator-Bereich m√ºssen Sie sich mit einem Passwort anmelden. Besuchen Sie dazu die Login-Seite und geben Sie das korrekte Passwort ein. Bei zu vielen fehlgeschlagenen Versuchen wird der Zugang vor√ºbergehend gesperrt.",
                sources: [
                    {
                        file: "login",
                        content: "Login process and password authentication",
                        reason: "Beschreibt den Anmeldeprozess"
                    }
                ],
                icon: "fas fa-lock"
            },
            "was tun bei vergessenem passwort": {
                answer: "Wenn Sie Ihr Passwort vergessen haben, wenden Sie sich bitte an den Systemadministrator. Aus Sicherheitsgr√ºnden kann ich keine Passwort-Informationen preisgeben.",
                sources: [
                    {
                        file: "login",
                        content: "Password security measures",
                        reason: "Behandelt den Fall eines vergessenen Passworts"
                    }
                ],
                icon: "fas fa-lock"
            },
            
            // NEW: Security warning for password questions
            "passwort": {
                answer: "Aus Sicherheitsgr√ºnden kann ich keine Informationen zu Passw√∂rtern preisgeben. Bitte wenden Sie sich an Ihren Administrator, wenn Sie Probleme mit dem Passwort haben.",
                sources: [
                    {
                        file: "Security Policy",
                        content: "Password security protocol",
                        reason: "Sicherheitsrichtlinie zum Schutz von Passw√∂rtern"
                    }
                ],
                icon: "fas fa-lock"
            },
            "administrator passwort": {
                answer: "Ich kann aus Sicherheitsgr√ºnden keine Passwort-Informationen preisgeben. Bei Passwort-Problemen wenden Sie sich bitte an den Systemadministrator.",
                sources: [
                    {
                        file: "Security Policy",
                        content: "Password security protocol",
                        reason: "Sicherheitsrichtlinie zum Schutz von Administrator-Passw√∂rtern"
                    }
                ],
                icon: "fas fa-lock"
            },
            
            // NEW: Technical details
            "welche technologien verwendet gittertier pro": {
                answer: "Gittertier Pro nutzt moderne Technologien wie WebRTC f√ºr den Scanner, QRCode.js f√ºr QR-Generierung, PeerJS f√ºr Echtzeit-Kommunikation und LocalStorage f√ºr Datenspeicherung. Die Software ist optimiert f√ºr alle Ger√§te und Browser.",
                sources: [
                    {
                        file: "Multiple files",
                        content: "Technology implementations across files",
                        reason: "Beschreibt die verwendeten Technologien"
                    }
                ],
                icon: "fas fa-microchip"
            },
            "funktioniert gittertier pro offline": {
                answer: "Gittertier Pro kann teilweise offline arbeiten. Produkte und Warenkorb-Daten werden lokal gespeichert. F√ºr die QR-Generierung und Bezahlabwicklung ist jedoch eine Internetverbindung erforderlich.",
                sources: [
                    {
                        file: "index",
                        content: "Local storage usage for products and cart",
                        reason: "Beschreibt die Offline-F√§higkeiten"
                    }
                ],
                icon: "fas fa-wifi"
            },
            
            // NEW: Feature details
            "hat gittertier pro einen dark mode": {
                answer: "Ja, Gittertier Pro unterst√ºtzt systemeigenen Dark Mode. Aktivieren Sie ihn in Ihren Systemeinstellungen, und die Oberfl√§che passt sich automatisch an.",
                sources: [
                    {
                        file: "index",
                        content: "Dark mode CSS media query",
                        reason: "Beschreibt die Dark Mode-Unterst√ºtzung"
                    }
                ],
                icon: "fas fa-moon"
            },
            "kann ich produkte importieren": {
                answer: "Derzeit unterst√ºtzt Gittertier Pro den manuellen Import von Produkten √ºber die Admin-Oberfl√§che oder durch Scannen der Barcodes. Ein Massenimport √ºber CSV-Dateien ist in Planung f√ºr zuk√ºnftige Updates.",
                sources: [
                    {
                        file: "index",
                        content: "Product management functionality",
                        reason: "Beschreibt die Produktimport-M√∂glichkeiten"
                    }
                ],
                icon: "fas fa-file-import"
            },
            
            // NEW: Support information
            "wo finde ich weiteren support": {
                answer: "Weiteren Support finden Sie in der ausf√ºhrlichen Dokumentation auf der Support-Seite. Bei komplexeren Problemen k√∂nnen Sie sich direkt an das Gittertier Pro Team wenden. Folgen Sie uns auf Instagram (@gittertierpro) f√ºr Updates.",
                sources: [
                    {
                        file: "support",
                        content: "Support information and resources",
                        reason: "Weist auf Support-Ressourcen hin"
                    }
                ],
                icon: "fas fa-headset support-icon"
            },
            "gibt es eine dokumentation": {
                answer: "Ja, Gittertier Pro verf√ºgt √ºber eine umfassende Dokumentation, die Sie auf der Support-Seite finden. Zus√§tzlich bietet das integrierte Tutorial eine schrittweise Einf√ºhrung in alle Funktionen.",
                sources: [
                    {
                        file: "support",
                        content: "Documentation reference",
                        reason: "Verweist auf die Dokumentation"
                    }
                ],
                icon: "fas fa-book"
            },
            
            // NEW: Business information
            "wer hat gittertier pro entwickelt": {
                answer: "Gittertier Pro wurde von Bastian Sch√§fer und Kaspar Niederberger entwickelt, um die spezifischen Anforderungen moderner H√§ndler zu adressieren. Die Software wird kontinuierlich weiterentwickelt.",
                sources: [
                    {
                        file: "About the Founders",
                        content: "Bastian Sch√§fer & Kaspar Niederberger",
                        reason: "Nennt die Gr√ºnder von Gittertier Pro"
                    }
                ],
                icon: "fas fa-users"
            },
            "wer sind die gr√ºnder": {
                answer: "Die Gr√ºnder von Gittertier Pro sind Bastian Sch√§fer und Kaspar Niederberger. Sie haben die Software entwickelt, um den Einzelhandel zu modernisieren und zu vereinfachen.",
                sources: [
                    {
                        file: "About the Founders",
                        content: "Bastian Sch√§fer & Kaspar Niederberger",
                        reason: "Nennt die Gr√ºnder von Gittertier Pro"
                    }
                ],
                icon: "fas fa-users"
            },
            "bastian sch√§fer": {
                answer: "Bastian Sch√§fer ist einer der Gr√ºnder von Gittertier Pro. Er hat ma√ügeblich zur Entwicklung der Software beigetragen.",
                sources: [
                    {
                        file: "About the Founders",
                        content: "Bastian Sch√§fer - Mitgr√ºnder",
                        reason: "Informationen zu Bastian Sch√§fer"
                    }
                ],
                icon: "fas fa-user"
            },
            "kaspar niederberger": {
                answer: "Kaspar Niederberger ist einer der Gr√ºnder von Gittertier Pro. Er ist verantwortlich f√ºr die technische Entwicklung und Konzeption der Software.",
                sources: [
                    {
                        file: "About the Founders",
                        content: "Kaspar Niederberger - Mitgr√ºnder",
                        reason: "Informationen zu Kaspar Niederberger"
                    }
                ],
                icon: "fas fa-user"
            },
            "ist gittertier pro kostenlos": {
                answer: "Gittertier Pro bietet eine kostenlose Basisversion mit allen wichtigen Funktionen. F√ºr erweiterte Funktionen und Unternehmensl√∂sungen gibt es kostenpflichtige Abonnements. Kontaktieren Sie uns f√ºr Details.",
                sources: [
                    {
                        file: "Business Information",
                        content: "Pricing policy",
                        reason: "Behandelt Fragen zur Preisgestaltung"
                    }
                ],
                icon: "fas fa-euro-sign"
            },
            "kostenlos": {
                answer: "Gittertier Pro bietet eine kostenlose Basisversion mit allen Kernfunktionen. F√ºr erweiterte Enterprise-Funktionen stehen kostenpflichtige Pakete zur Verf√ºgung.",
                sources: [
                    {
                        file: "Business Information",
                        content: "Free tier availability",
                        reason: "Best√§tigt kostenlose Nutzungsm√∂glichkeit"
                    }
                ],
                icon: "fas fa-euro-sign"
            },
            "kostet etwas": {
                answer: "Die Basisversion von Gittertier Pro ist kostenlos. F√ºr erweiterte Funktionen wie Mehrbenutzer-Support, erweiterte Analytik und Premium-Support gibt es kostenpflichtige Optionen.",
                sources: [
                    {
                        file: "Business Information",
                        content: "Free and paid tiers",
                        reason: "Erkl√§rt kostenlose und kostenpflichtige Optionen"
                    }
                ],
                icon: "fas fa-euro-sign"
            },
            
            // NEW: Error handling
            "was tun bei fehlermeldungen": {
                answer: "Bei Fehlermeldungen notieren Sie sich bitte den genauen Fehlertext und melden ihn an den Support. Oft helfen bereits einfache Schritte wie Neuladen der Seite oder Zur√ºcksetzen des Caches.",
                sources: [
                    {
                        file: "General Troubleshooting",
                        content: "Error handling procedures",
                        reason: "Beschreibt den Umgang mit Fehlermeldungen"
                    }
                ],
                icon: "fas fa-exclamation-triangle"
            },
            
            // NEW: Future features
            "welche features sind geplant": {
                answer: "Zuk√ºnftige Updates f√ºr Gittertier Pro werden unter anderem erweiterte Berichte, Inventory-Management, Mehrbenutzer-Support und Integration mit Buchhaltungssoftware bringen. Folgen Sie @gittertierpro auf Instagram f√ºr Updates.",
                sources: [
                    {
                        file: "about",
                        content: "Future development plans",
                        reason: "Beschreibt geplante Funktionen"
                    }
                ],
                icon: "fas fa-road"
            },
            
            // NEW: Problem solving
            "was machen wenn der qr code nicht generiert wird": {
                answer: "Wenn der QR-Code nicht generiert wird: 1) Pr√ºfen Sie, ob Artikel im Warenkorb sind 2) Laden Sie die Seite neu 3) Pr√ºfen Sie die Internetverbindung 4) Kontaktieren Sie den Support, wenn das Problem bestehen bleibt.",
                sources: [
                    {
                        file: "index",
                        content: "QR code generation troubleshooting",
                        reason: "Bietet L√∂sungen f√ºr QR-Generierungsprobleme"
                    }
                ],
                icon: "fas fa-qrcode payment-icon"
            },
            "was tun wenn ich keine ahnung habe wie die seite funktioniert": {
                answer: "Keine Sorge! Starten Sie das Tutorial √ºber das Fragezeichen-Symbol in der Kopfzeile. Es f√ºhrt Sie Schritt f√ºr Schritt durch alle Funktionen. Sie k√∂nnen mich auch jederzeit fragen!",
                sources: [
                    {
                        file: "index",
                        content: "Tutorial system",
                        reason: "Verweist auf das Tutorial f√ºr Neueinsteiger"
                    }
                ],
                icon: "fas fa-graduation-cap tutorial-icon"
            },
            "wie kann ich produkte erh√∂hen und danach bezahlen": {
                answer: "So erh√∂hen Sie Produktmengen und bezahlen: 1) Scannen Sie das Produkt oder f√ºgen Sie es manuell hinzu 2) Passen Sie die Menge mit den +/- Buttons an 3) F√ºgen Sie es zum Warenkorb hinzu 4) Klicken Sie auf 'Bezahlen' f√ºr den QR-Code.",
                sources: [
                    {
                        file: "index",
                        content: "Product quantity adjustment and payment process",
                        reason: "Beschreibt den Prozess von Mengenanpassung bis Bezahlung"
                    }
                ],
                icon: "fas fa-cart-plus"
            },

            // NEW: Additional questions to reach 70+
            "kann ich mehrere filialen verwalten": {
                answer: "Aktuell unterst√ºtzt Gittertier Pro die Verwaltung einer einzelnen Filiale. Mehrfilialen-Support ist f√ºr zuk√ºnftige Updates geplant. Folgen Sie @gittertierpro auf Instagram f√ºr Ank√ºndigungen.",
                sources: [
                    {
                        file: "Roadmap",
                        content: "Multi-store management planning",
                        reason: "Informationen zur Mehrfilialen-Unterst√ºtzung"
                    }
                ],
                icon: "fas fa-store"
            },
            "wie exportiere ich verkaufsdaten": {
                answer: "Verkaufsdaten k√∂nnen aktuell √ºber die Browser-Entwicklertools im LocalStorage eingesehen werden. Ein vollst√§ndiger Export mit CSV- und Excel-Format ist f√ºr ein zuk√ºnftiges Update geplant.",
                sources: [
                    {
                        file: "index",
                        content: "Local storage data structure",
                        reason: "Beschreibt die Speicherung von Verkaufsdaten"
                    }
                ],
                icon: "fas fa-file-export"
            },
            "gibt es eine app version": {
                answer: "Gittertier Pro ist eine Web-App, die auf allen Ger√§ten funktioniert. Sie k√∂nnen sie auf Ihrem Home-Bildschirm installieren, um ein App-√§hnliches Erlebnis zu erhalten. Eine native App ist derzeit nicht geplant.",
                sources: [
                    {
                        file: "PWA Features",
                        content: "Progressive Web App capabilities",
                        reason: "Informationen zur App-√§hnlichen Nutzung"
                    }
                ],
                icon: "fas fa-mobile-alt"
            },
            "unterst√ºtzt gittertier pro bargeldzahlung": {
                answer: "Gittertier Pro konzentriert sich auf digitale Zahlungen per QR-Code. F√ºr Bargeldzahlungen m√ºssen Sie den Betrag manuell erfassen und die Kassensoftware entsprechend anpassen.",
                sources: [
                    {
                        file: "Payment Processing",
                        content: "Digital payment focus",
                        reason: "Erkl√§rung zum Zahlungsfokus"
                    }
                ],
                icon: "fas fa-money-bill-wave"
            },
            "wie aktualisiere ich die software": {
                answer: "Da Gittertier Pro eine Web-App ist, erfolgen Updates automatisch. Sie m√ºssen nichts installieren - neue Versionen werden serverseitig bereitgestellt und sind sofort verf√ºgbar.",
                sources: [
                    {
                        file: "Technical Documentation",
                        content: "Web app update process",
                        reason: "Beschreibt den Update-Prozess"
                    }
                ],
                icon: "fas fa-sync"
            },
            "kann ich das design anpassen": {
                answer: "Gittertier Pro unterst√ºtzt Dark Mode basierend auf Ihren Systemeinstellungen. Weitere Design-Anpassungen sind aktuell nicht vorgesehen, k√∂nnten aber in Zukunft hinzugef√ºgt werden.",
                sources: [
                    {
                        file: "index",
                        content: "Dark mode implementation",
                        reason: "Informationen zu Design-Anpassungen"
                    }
                ],
                icon: "fas fa-paint-brush"
            },
            "was kostet gittertier pro": {
                answer: "Gittertier Pro bietet eine kostenlose Basisversion. F√ºr erweiterte Funktionen und Unternehmensl√∂sungen kontaktieren Sie uns bitte direkt f√ºr ein individuelles Angebot.",
                sources: [
                    {
                        file: "Pricing Information",
                        content: "Free tier and enterprise solutions",
                        reason: "Informationen zur Preisgestaltung"
                    }
                ],
                icon: "fas fa-euro-sign"
            },
            "gibt es eine datensicherung": {
                answer: "Ihre Daten werden lokal in Ihrem Browser gespeichert. F√ºr eine Sicherung exportieren Sie regelm√§√üig Ihre Verkaufsdaten. Eine automatische Cloud-Sicherung ist f√ºr zuk√ºnftige Updates geplant.",
                sources: [
                    {
                        file: "Data Management",
                        content: "Local storage and backup procedures",
                        reason: "Informationen zur Datensicherung"
                    }
                ],
                icon: "fas fa-database"
            },
            "kann ich produkte kategorisieren": {
                answer: "Aktuell unterst√ºtzt Gittertier Pro keine Produktkategorien. Diese Funktion ist auf unserer Roadmap und wird in einem zuk√ºnftigen Update hinzugef√ºgt.",
                sources: [
                    {
                        file: "Product Management",
                        content: "Categorization roadmap",
                        reason: "Informationen zur Produktkategorisierung"
                    }
                ],
                icon: "fas fa-tags"
            },
            "wie viele produkte kann ich verwalten": {
                answer: "Gittertier Pro kann theoretisch Tausende von Produkten verwalten. Die Leistung h√§ngt von Ihrem Ger√§t und Browser ab. F√ºr gro√üe Best√§nde empfehlen wir leistungsstarke Ger√§te.",
                sources: [
                    {
                        file: "Technical Specifications",
                        content: "Performance and scalability",
                        reason: "Informationen zur Skalierbarkeit"
                    }
                ],
                icon: "fas fa-boxes"
            },
            "funktioniert es auf dem tablet": {
                answer: "Ja, Gittertier Pro ist vollst√§ndig responsive und funktioniert optimal auf Tablets, Smartphones und Desktop-Computern.",
                sources: [
                    {
                        file: "Responsive Design",
                        content: "Tablet and mobile optimization",
                        reason: "Informationen zur Tablet-Kompatibilit√§t"
                    }
                ],
                icon: "fas fa-tablet-alt"
            },
            "brauche ich eine internetverbindung": {
                answer: "F√ºr den Scanner und die QR-Generierung ist eine Internetverbindung erforderlich. Ein Offline-Modus f√ºr grundlegende Funktionen ist in Planung.",
                sources: [
                    {
                        file: "Connectivity Requirements",
                        content: "Online and offline capabilities",
                        reason: "Informationen zu Verbindungsanforderungen"
                    }
                ],
                icon: "fas fa-wifi"
            },
            "kann ich rabatte vergeben": {
                answer: "Aktuell unterst√ºtzt Gittertier Pro keine Rabattfunktionen. Sie k√∂nnen manuell reduzierte Preise eingeben. Rabatt-Funktionen sind f√ºr zuk√ºnftige Updates geplant.",
                sources: [
                    {
                        file: "Feature Roadmap",
                        content: "Discount functionality planning",
                        reason: "Informationen zu Rabattfunktionen"
                    }
                ],
                icon: "fas fa-percent"
            },
            "werden mehrere sprachen unterst√ºtzt": {
                answer: "Gittertier Pro ist aktuell auf Deutsch verf√ºgbar. Weitere Sprachen sind in Planung. Folgen Sie @gittertierpro f√ºr Updates zu neuen Sprachversionen.",
                sources: [
                    {
                        file: "Localization",
                        content: "Multi-language support planning",
                        reason: "Informationen zur Sprachunterst√ºtzung"
                    }
                ],
                icon: "fas fa-language"
            },
            "kann ich mit mehreren kassen arbeiten": {
                answer: "Aktuell unterst√ºtzt Gittertier Pro eine Kasse per Browser. Mehrere Kassen erfordern mehrere Ger√§te. Synchronisation zwischen mehreren Kassen ist f√ºr die Zukunft geplant.",
                sources: [
                    {
                        file: "Multi-Register",
                        content: "Multiple register support planning",
                        reason: "Informationen zur Mehrfachkassen-Unterst√ºtzung"
                    }
                ],
                icon: "fas fa-cash-register"
            },
            "gibt es eine inventurfunktion": {
                answer: "Eine vollst√§ndige Inventurfunktion ist aktuell nicht verf√ºgbar, aber auf unserer Roadmap. Aktuell k√∂nnen Sie den Bestand √ºber die Produktliste einsehen.",
                sources: [
                    {
                        file: "Inventory Management",
                        content: "Stocktaking feature planning",
                        reason: "Informationen zur Inventurfunktion"
                    }
                ],
                icon: "fas fa-clipboard-list"
            },
            "kann ich mit barcode drucker arbeiten": {
                answer: "Gittertier Pro unterst√ºtzt das Scannen von Barcodes, aber nicht direkt das Drucken. Sie k√∂nnen jedoch beliebige Barcode-Drucker verwenden, die Standardformate unterst√ºtzen.",
                sources: [
                    {
                        file: "Barcode Handling",
                        content: "Barcode printing compatibility",
                        reason: "Informationen zur Barcode-Druckerunterst√ºtzung"
                    }
                ],
                icon: "fas fa-barcode"
            },
            "wie lang ist der support erreichbar": {
                answer: "Unser KI-Assistent ist 24/7 verf√ºgbar. F√ºr pers√∂nlichen Support kontaktieren Sie uns bitte √ºber Instagram @gittertierpro w√§hrend der Gesch√§ftszeiten.",
                sources: [
                    {
                        file: "Support Information",
                        content: "Support availability",
                        reason: "Informationen zur Support-Erreichbarkeit"
                    }
                ],
                icon: "fas fa-headset support-icon"
            },
            "kann ich die software an meine bed√ºrfnisse anpassen": {
                answer: "Gittertier Pro ist eine Standardl√∂sung. Individuelle Anpassungen sind auf Anfrage m√∂glich. Kontaktieren Sie uns f√ºr Custom-L√∂sungen.",
                sources: [
                    {
                        file: "Customization",
                        content: "Customization options",
                        reason: "Informationen zu Anpassungsm√∂glichkeiten"
                    }
                ],
                icon: "fas fa-sliders-h"
            },

            // Default response for unknown questions
            "default": {
                answer: "Entschuldigung, ich habe Ihre Frage nicht vollst√§ndig verstanden. K√∂nnten Sie sie bitte anders formulieren? Ich kann Ihnen bei Fragen zu Gittertier Pro helfen, wie z.B. Scanner-Funktionalit√§t, Produktverwaltung, Zahlungsabwicklung oder Tutorials.",
                sources: [
                    {
                        file: "General knowledge",
                        content: "AI response system",
                        reason: "Standardantwort f√ºr nicht erkannte Fragen"
                    }
                ],
                icon: "fas fa-question-circle"
            }
        };

        // DOM elements
        const aiModal = document.getElementById('aiModal');
        const chatContainer = document.getElementById('chatContainer');
        const aiInput = document.getElementById('aiInput');
        const sourcesModal = document.getElementById('sourcesModal');
        const sourcesContent = document.getElementById('sourcesContent');
        const blockModal = document.getElementById('blockModal');
        const blockOverlay = document.getElementById('blockOverlay');
        const blockTimer = document.getElementById('blockTimer');
        
        // Current sources for the last answer
        let currentSources = [];
        
        // User warning system
        let userWarnings = parseInt(localStorage.getItem('ai_user_warnings') || '0');
        let isUserBlocked = localStorage.getItem('ai_user_blocked') === 'true';
        let blockEndTime = parseInt(localStorage.getItem('ai_block_end_time') || '0');
        
        // Chat history for email support
        let chatHistory = [];
        
        // Inappropriate words list (German)
        const inappropriateWords = [
            'arsch', 'schei√üe', 'scheisse', 'fick', 'hure', 'wichser', 'mistst√ºck', 
            'trottel', 'idiot', 'depp', 'dummkopf', 'schlampe', 'bastard', 'wichser',
            'spasti', 'schwuchtel', 'nutte', 'muschi', 'penis', 'vagina', 'titten',
            'fotze', 'wichse', 'wixxer', 'pimmel', 'arschloch', 'kacke', 'schei√ü',
            'scheiss', 'bl√∂dmann', 'vollidiot', 'hurensohn', 'mist', 'kack', 'dreck'
        ];
        
        // Check if user is currently blocked
        function checkUserBlocked() {
            if (isUserBlocked) {
                const now = Date.now();
                if (now < blockEndTime) {
                    // User is still blocked
                    const remainingTime = Math.ceil((blockEndTime - now) / 1000);
                    startBlockTimer(remainingTime);
                    blockModal.style.display = 'flex';
                    blockOverlay.style.display = 'block';
                    return true;
                } else {
                    // Block has expired
                    isUserBlocked = false;
                    userWarnings = 0;
                    localStorage.removeItem('ai_user_blocked');
                    localStorage.removeItem('ai_block_end_time');
                    localStorage.removeItem('ai_user_warnings');
                    blockOverlay.style.display = 'none';
                }
            }
            return false;
        }
        
        // Open AI Modal
        function openAIModal() {
            if (checkUserBlocked()) return;
            
            aiModal.style.display = 'flex';
            aiInput.focus();
            
            // On mobile, make it full screen
            if (window.innerWidth <= 768) {
                document.querySelector('.ai-modal-content').style.borderRadius = '0';
            }
        }
        
        // Close AI Modal
        function closeAIModal() {
            aiModal.style.display = 'none';
            
            // Reset modal style
            document.querySelector('.ai-modal-content').style.borderRadius = '';
        }
        
        // Close Sources Modal
        function closeSourcesModal() {
            sourcesModal.style.display = 'none';
        }
        
        // Show sources modal with details
        function showSources() {
            sourcesContent.innerHTML = '';
            
            currentSources.forEach((source, index) => {
                const sourceElement = document.createElement('div');
                sourceElement.className = 'source-detail';
                
                // Add banner for certain file types
                let bannerHtml = '';
                if (source.file.includes('about')) {
                    bannerHtml = `
                        <div class="source-banner">
                            <div class="source-banner-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div class="source-banner-content">
                                <div class="source-banner-title">√úber Gittertier Pro</div>
                                <div class="source-banner-text">Erfahren Sie mehr √ºber die Funktionen und Vorteile unserer Software</div>
                            </div>
                            <button class="source-banner-button" onclick="window.location.href='about'">
                                Zur About-Seite
                            </button>
                        </div>
                    `;
                } else if (source.file.includes('index')) {
                    bannerHtml = `
                        <div class="source-banner">
                            <div class="source-banner-icon">
                                <i class="fas fa-home"></i>
                            </div>
                            <div class="source-banner-content">
                                <div class="source-banner-title">Hauptseite</div>
                                <div class="source-banner-text">Zur√ºck zur Hauptseite mit Scanner und Warenkorb</div>
                            </div>
                            <button class="source-banner-button" onclick="window.location.href='index'">
                                Zur Hauptseite
                            </button>
                        </div>
                    `;
                } else if (source.file.includes('customer')) {
                    bannerHtml = `
                        <div class="source-banner">
                            <div class="source-banner-icon">
                                <i class="fas fa-qrcode"></i>
                            </div>
                            <div class="source-banner-content">
                                <div class="source-banner-title">Kundenseite</div>
                                <div class="source-banner-text">Bezahlseite f√ºr Kunden</div>
                            </div>
                            <button class="source-banner-button" onclick="window.location.href='customer'">
                                Zur Kundenseite
                            </button>
                        </div>
                    `;
                } else if (source.file.includes('login')) {
                    bannerHtml = `
                        <div class="source-banner">
                            <div class="source-banner-icon">
                                <i class="fas fa-lock"></i>
                            </div>
                            <div class="source-banner-content">
                                <div class="source-banner-title">Login-Seite</div>
                                <div class="source-banner-text">Administrator-Anmeldung</div>
                            </div>
                            <button class="source-banner-button" onclick="window.location.href='login'">
                                Zur Login-Seite
                            </button>
                        </div>
                    `;
                }
                
                sourceElement.innerHTML = `
                    <h3 class="source-detail-title">${source.file}</h3>
                    <div class="source-detail-content">${source.content}</div>
                    <div class="source-detail-reason">
                        <strong>Grund der Verwendung:</strong> ${source.reason}
                    </div>
                    ${bannerHtml}
                `;
                sourcesContent.appendChild(sourceElement);
            });
            
            sourcesModal.style.display = 'flex';
        }
        
        // Add message to chat
        function addMessage(text, isUser = false, isWarning = false, isBlocked = false, icon = null) {
            const messageElement = document.createElement('div');
            
            if (isUser) {
                messageElement.className = 'ai-message user';
                messageElement.innerHTML = `<p>${text}</p>`;
                
                // Add to chat history
                chatHistory.push({
                    type: 'user',
                    content: text,
                    timestamp: new Date().toISOString()
                });
            } else {
                let className = 'ai-message ai';
                if (isWarning) className += ' warning';
                if (isBlocked) className += ' blocked';
                
                messageElement.className = className;
                
                // Add icon if provided
                let iconHtml = '';
                if (icon) {
                    iconHtml = `<i class="${icon} topic-icon"></i>`;
                }
                
                // Check if the answer contains sources
                const hasSources = currentSources && currentSources.length > 0;
                
                messageElement.innerHTML = `
                    <div>${iconHtml}${text}</div>
                    ${hasSources ? `
                        <div class="ai-sources">
                            <div class="ai-sources-title" onclick="showSources()">
                                <i class="fas fa-file-alt"></i>
                                Quellen
                                <i class="fas fa-info-circle"></i>
                            </div>
                            ${currentSources.map(source => `
                                <div class="ai-source-item" onclick="showSources()">
                                    <i class="fas fa-link"></i> ${source.file}
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                `;
                
                // Add to chat history
                chatHistory.push({
                    type: 'ai',
                    content: text,
                    timestamp: new Date().toISOString(),
                    sources: hasSources ? currentSources : []
                });
            }
            
            chatContainer.appendChild(messageElement);
            
            // Scroll to bottom to show new message
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        // Show typing indicator
        function showTypingIndicator() {
            const typingElement = document.createElement('div');
            typingElement.className = 'ai-typing';
            typingElement.id = 'typingIndicator';
            typingElement.innerHTML = `
                Gittertier AI schreibt...
                <div class="ai-typing-dot"></div>
                <div class="ai-typing-dot"></div>
                <div class="ai-typing-dot"></div>
            `;
            
            chatContainer.appendChild(typingElement);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            return typingElement;
        }
        
        // Check for inappropriate content
        function hasInappropriateContent(text) {
            const lowerText = text.toLowerCase();
            return inappropriateWords.some(word => lowerText.includes(word));
        }
        
        // Warn user for inappropriate behavior
        function warnUser(message) {
            userWarnings++;
            localStorage.setItem('ai_user_warnings', userWarnings.toString());
            
            if (userWarnings >= 3) {
                // Block user for 5 minutes
                isUserBlocked = true;
                blockEndTime = Date.now() + (5 * 60 * 1000); // 5 minutes from now
                localStorage.setItem('ai_user_blocked', 'true');
                localStorage.setItem('ai_block_end_time', blockEndTime.toString());
                
                addMessage("Sie wurden aufgrund wiederholter unangemessener Anfragen f√ºr 5 Minuten gesperrt.", false, false, true);
                startBlockTimer(300);
                blockModal.style.display = 'flex';
                blockOverlay.style.display = 'block';
                return true;
            }
            
            addMessage(`Warnung ${userWarnings}/3: ${message} Bei weiteren Verst√∂√üen wird Ihr Zugang gesperrt.`, false, true);
            return false;
        }
        
        // Start block timer
        function startBlockTimer(seconds) {
            let timeLeft = seconds;
            const timerInterval = setInterval(() => {
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    blockModal.style.display = 'none';
                    blockOverlay.style.display = 'none';
                    isUserBlocked = false;
                    userWarnings = 0;
                    localStorage.removeItem('ai_user_blocked');
                    localStorage.removeItem('ai_block_end_time');
                    localStorage.removeItem('ai_user_warnings');
                    return;
                }
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                blockTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                timeLeft--;
            }, 1000);
        }
        
        // Process question and return answer
        function processQuestion(question) {
            const lowerQuestion = question.toLowerCase().trim();
            
            // Check for inappropriate content first
            if (hasInappropriateContent(lowerQuestion)) {
                const blocked = warnUser("Bitte verwenden Sie eine angemessene Sprache.");
                if (blocked) return null;
                
                return { answer: "Ich kann nur Fragen zu Gittertier Pro beantworten. Bitte verwenden Sie eine angemessene Sprache.", icon: "fas fa-exclamation-triangle" };
            }
            
            // Check for password-related questions
            if (lowerQuestion.includes('passwort') || lowerQuestion.includes('password') || 
                lowerQuestion.includes('kennwort') || lowerQuestion.includes('anmeldedaten')) {
                currentSources = knowledgeBase['passwort'].sources;
                return { answer: knowledgeBase['passwort'].answer, icon: knowledgeBase['passwort'].icon };
            }
            
            // Check for exact matches first
            if (knowledgeBase[lowerQuestion]) {
                currentSources = knowledgeBase[lowerQuestion].sources;
                return { answer: knowledgeBase[lowerQuestion].answer, icon: knowledgeBase[lowerQuestion].icon };
            }
            
            // Check for partial matches with improved matching
            for (const key in knowledgeBase) {
                if (key !== 'default') {
                    // Split both the question and key into words for better matching
                    const questionWords = lowerQuestion.split(/\s+/);
                    const keyWords = key.split(/\s+/);
                    
                    // Check if all key words appear in the question
                    const allKeyWordsFound = keyWords.every(keyWord => 
                        questionWords.some(questionWord => questionWord.includes(keyWord))
                    );
                    
                    // Also check if the question contains the key as substring (original logic)
                    if (allKeyWordsFound || lowerQuestion.includes(key)) {
                        currentSources = knowledgeBase[key].sources;
                        return { answer: knowledgeBase[key].answer, icon: knowledgeBase[key].icon };
                    }
                }
            }
            
            // Check for question patterns with improved keyword matching
            const questionWords = lowerQuestion.split(/\s+/);
            
            // Scanner-related questions
            if (questionWords.some(word => ['scanner', 'scan', 'kamera'].includes(word))) {
                if (questionWords.some(word => ['start', 'begin', 'aktivier', 'ein'].includes(word))) {
                    currentSources = knowledgeBase['wie starte ich den scanner'].sources;
                    return { answer: knowledgeBase['wie starte ich den scanner'].answer, icon: knowledgeBase['wie starte ich den scanner'].icon };
                }
                if (questionWords.some(word => ['funktioniert', 'geht', 'kaputt', 'problem'].includes(word))) {
                    currentSources = knowledgeBase['scanner funktioniert nicht'].sources;
                    return { answer: knowledgeBase['scanner funktioniert nicht'].answer, icon: knowledgeBase['scanner funktioniert nicht'].icon };
                }
                currentSources = knowledgeBase['wie funktioniert der scanner'].sources;
                return { answer: knowledgeBase['wie funktioniert der scanner'].answer, icon: knowledgeBase['wie funktioniert der scanner'].icon };
            }
            
            // Product-related questions
            if (questionWords.some(word => ['produkt', 'artikel', 'ware'].includes(word))) {
                if (questionWords.some(word => ['hinzuf√ºg', 'add', 'erfass', 'neu'].includes(word))) {
                    currentSources = knowledgeBase['wie f√ºge ich produkte hinzu'].sources;
                    return { answer: knowledgeBase['wie f√ºge ich produkte hinzu'].answer, icon: knowledgeBase['wie f√ºge ich produkte hinzu'].icon };
                }
                if (questionWords.some(word => ['nicht', 'gefunden', 'finde', 'fehl'].includes(word))) {
                    currentSources = knowledgeBase['produkt nicht gefunden'].sources;
                    return { answer: knowledgeBase['produkt nicht gefunden'].answer, icon: knowledgeBase['produkt nicht gefunden'].icon };
                }
            }
            
            // Payment-related questions
            if (questionWords.some(word => ['zahlung', 'bezahl', 'qr', 'code', 'qrcode'].includes(word))) {
                if (questionWords.some(word => ['funktioniert', 'geht', 'kaputt', 'generier'].includes(word))) {
                    currentSources = knowledgeBase['qr code wird nicht generiert'].sources;
                    return { answer: knowledgeBase['qr code wird nicht generiert'].answer, icon: knowledgeBase['qr code wird nicht generiert'].icon };
                }
                currentSources = knowledgeBase['wie bezahle ich mit qr code'].sources;
                return { answer: knowledgeBase['wie bezahle ich mit qr code'].answer, icon: knowledgeBase['wie bezahle ich mit qr code'].icon };
            }
            
            // Tutorial-related questions
            if (questionWords.some(word => ['tutorial', 'anleitung', 'hilfe', 'lern', 'einweis'].includes(word))) {
                if (questionWords.some(word => ['verpass', 'inhalt', 'enth√§lt', 'beinhaltet'].includes(word))) {
                    currentSources = knowledgeBase['was verpasse ich im tutorial'].sources;
                    return { answer: knowledgeBase['was verpasse ich im tutorial'].answer, icon: knowledgeBase['was verpasse ich im tutorial'].icon };
                }
                currentSources = knowledgeBase['gibt es ein tutorial'].sources;
                return { answer: knowledgeBase['gibt es ein tutorial'].answer, icon: knowledgeBase['gibt es ein tutorial'].icon };
            }
            
            // Instagram-related questions
            if (questionWords.some(word => ['instagram', 'insta', 'social', 'media', 'sozial', '@'].includes(word))) {
                currentSources = knowledgeBase['instagram'].sources;
                return { answer: knowledgeBase['instagram'].answer, icon: knowledgeBase['instagram'].icon };
            }
            
            // Check for greetings
            if (questionWords.some(word => ['hallo', 'hi', 'hey', 'guten', 'tag', 'morgen', 'abend'].includes(word))) {
                // Return a random greeting response
                const greetings = ['hallo', 'hi', 'guten tag'];
                const randomGreeting = greetings[Math.floor(Math.random() * greetings.length)];
                currentSources = knowledgeBase[randomGreeting].sources;
                return { answer: knowledgeBase[randomGreeting].answer, icon: knowledgeBase[randomGreeting].icon };
            }
            
            // Check for thanks
            if (questionWords.some(word => ['danke', 'dankesch√∂n', 'danken', 'thx', 'thanks', 'dank√∂', 'tysm'].includes(word))) {
                // Return a random thanks response
                const thanks = ['danke', 'dankesch√∂n', 'vielen dank', 'dank√∂'];
                const randomThanks = thanks[Math.floor(Math.random() * thanks.length)];
                currentSources = knowledgeBase[randomThanks].sources;
                return { answer: knowledgeBase[randomThanks].answer, icon: knowledgeBase[randomThanks].icon };
            }
            
            // Check for goodbye
            if (questionWords.some(word => ['tschau', 'bye', 'ciao', 'ade', 'auf wiedersehen', 'bis bald'].includes(word))) {
                // Return a random goodbye response
                const goodbyes = ['tschau', 'bye', 'ciao'];
                const randomGoodbye = goodbyes[Math.floor(Math.random() * goodbyes.length)];
                currentSources = knowledgeBase[randomGoodbye].sources;
                return { answer: knowledgeBase[randomGoodbye].answer, icon: knowledgeBase[randomGoodbye].icon };
            }
            
            // Check for AI identity questions
            if (questionWords.some(word => ['wer', 'was', 'bist', 'du', 'funktionierst', 'kannst', 'name', 'hei√üt'].includes(word))) {
                currentSources = knowledgeBase['wer bist du'].sources;
                return { answer: knowledgeBase['wer bist du'].answer, icon: knowledgeBase['wer bist du'].icon };
            }
            
            // Check for cost questions
            if (questionWords.some(word => ['kosten', 'preis', 'kostenlos', 'gratis', 'teuer', 'preiswert', 'kostet', 'geld'].includes(word))) {
                currentSources = knowledgeBase['ist gittertier pro kostenlos'].sources;
                return { answer: knowledgeBase['ist gittertier pro kostenlos'].answer, icon: knowledgeBase['ist gittertier pro kostenlos'].icon };
            }
            
            // Check for founder questions
            if (questionWords.some(word => ['gr√ºnder', 'entwickler', 'erfinder', 'bastian', 'sch√§fer', 'kaspar', 'niederberger'].includes(word))) {
                currentSources = knowledgeBase['wer hat gittertier pro entwickelt'].sources;
                return { answer: knowledgeBase['wer hat gittertier pro entwickelt'].answer, icon: knowledgeBase['wer hat gittertier pro entwickelt'].icon };
            }
            
            // Check for future plans questions
            if (questionWords.some(word => ['zukunft', 'pl√§ne', 'roadmap', 'entwicklung', 'geplant', 'kommend'].includes(word))) {
                currentSources = knowledgeBase['welche features sind geplant'].sources;
                return { answer: knowledgeBase['welche features sind geplant'].answer, icon: knowledgeBase['welche features sind geplant'].icon };
            }
            
            // Default response
            currentSources = knowledgeBase['default'].sources;
            return { answer: knowledgeBase['default'].answer, icon: knowledgeBase['default'].icon };
        }
        
        // Process multiple questions in one message
        function processMultipleQuestions(text) {
            // Split text into sentences or question parts
            const sentences = text.split(/[.,;?ÔºÅÔºü„ÄÇ]+/).filter(s => s.trim().length > 0);
            const results = [];
            
            for (const sentence of sentences) {
                // Skip very short sentences
                if (sentence.length < 3) continue;
                
                const result = processQuestion(sentence);
                if (result) {
                    results.push({
                        question: sentence,
                        answer: result.answer,
                        icon: result.icon
                    });
                }
            }
            
            return results;
        }
        
        // Format response for multiple questions
        function formatMultipleResponse(questions) {
            if (questions.length === 0) {
                return "<p>Ich habe keine Fragen in Ihrer Nachricht erkannt. K√∂nnten Sie Ihre Frage bitte pr√§ziser formulieren?</p>";
            }
            
            if (questions.length === 1) {
                return `<p>${questions[0].answer}</p>`;
            }
            
            let html = `<div class="multi-response"><p>Ich habe ${questions.length} Fragen in Ihrer Nachricht erkannt:</p>`;
            
            questions.forEach((q, index) => {
                html += `
                    <div class="response-section">
                        <div class="response-question">Frage ${index + 1}: "${q.question}"</div>
                        <div>${q.icon ? `<i class="${q.icon} topic-icon"></i>` : ''}${q.answer}</div>
                    </div>
                `;
            });
            
            html += `</div>`;
            
            // Add Instagram banner if any question was about Instagram or if multiple questions were asked
            const hasInstagramQuestion = questions.some(q => 
                q.question.toLowerCase().includes('instagram') || 
                q.question.toLowerCase().includes('insta') ||
                q.question.toLowerCase().includes('social media')
            );
            
            if (hasInstagramQuestion || questions.length > 1) {
                html += `
                    <div class="instagram-banner">
                        <p>Folgen Sie uns auf Instagram f√ºr Updates und Tipps!</p>
                        <a href="https://instagram.com/gittertierpro" target="_blank">
                            <i class="fab fa-instagram"></i> @gittertierpro
                        </a>
                    </div>
                `;
            }
            
            return html;
        }
        
        // Ask a question programmatically
        function askQuestion(question) {
            aiInput.value = question;
            sendMessage();
        }
        
        // Generate email with chat history
        function generateSupportEmail(subject = "Supportanfrage Gittertier Pro") {
            let emailBody = "Hallo Gittertier Pro Team,%0D%0A%0D%0A";
            emailBody += "Ich ben√∂tige Unterst√ºtzung bei:%0D%0A%0D%0A";
            emailBody += "Chat-Verlauf:%0D%0A";
            
            // Add chat history to email body
            chatHistory.forEach(msg => {
                const timestamp = new Date(msg.timestamp).toLocaleTimeString();
                const type = msg.type === 'user' ? 'Ich' : 'AI Assistant';
                emailBody += `${timestamp} - ${type}: ${msg.content}%0D%0A`;
            });
            
            emailBody += "%0D%0AMit freundlichen Gr√º√üen";
            
            return `mailto:kaspar.niederberger@outlook.com?subject=${encodeURIComponent(subject)}&body=${emailBody}`;
        }
        
        // Send message
        function sendMessage() {
            if (checkUserBlocked()) return;
            
            const message = aiInput.value.trim();
            if (!message) return;
            
            // Check for inappropriate content
            if (hasInappropriateContent(message)) {
                const blocked = warnUser("Bitte verwenden Sie eine angemessene Sprache.");
                if (blocked) return;
                
                aiInput.value = '';
                return;
            }
            
            // Add user message
            addMessage(message, true);
            aiInput.value = '';
            
            // Show typing indicator
            const typingIndicator = showTypingIndicator();
            
            // Process question and respond after a short delay
            setTimeout(() => {
                // Remove typing indicator
                if (typingIndicator && typingIndicator.parentNode) {
                    typingIndicator.parentNode.removeChild(typingIndicator);
                }
                
                // Process multiple questions
                const questions = processMultipleQuestions(message);
                
                if (questions.length > 0) {
                    const response = formatMultipleResponse(questions);
                    const firstQuestion = questions[0];
                    addMessage(response, false, false, false, firstQuestion.icon);
                    
                    // Add contact banner for certain types of questions
                    const hasSupportQuestion = questions.some(q => 
                        q.question.toLowerCase().includes('support') || 
                        q.question.toLowerCase().includes('hilfe') ||
                        q.question.toLowerCase().includes('problem') ||
                        q.question.toLowerCase().includes('fehler') ||
                        q.question.toLowerCase().includes('kontakt')
                    );
                    
                    if (hasSupportQuestion) {
                        const banner = `
                            <div class="contact-banner">
                                <p>Ben√∂tigen Sie weiteren Support?</p>
                                <a href="${generateSupportEmail('Supportanfrage: ' + message.substring(0, 30) + '...')}">
                                    <i class="fas fa-envelope"></i> Support kontaktieren
                                </a>
                            </div>
                        `;
                        
                        setTimeout(() => {
                            const bannerElement = document.createElement('div');
                            bannerElement.innerHTML = banner;
                            chatContainer.appendChild(bannerElement);
                            chatContainer.scrollTop = chatContainer.scrollHeight;
                        }, 500);
                    }
                } else {
                    // Get and add AI response for single question
                    const response = processQuestion(message);
                    if (response) {
                        addMessage(response.answer, false, false, false, response.icon);
                        
                        // Add Instagram banner if question was about Instagram or for certain responses
                        if (message.toLowerCase().includes('instagram') || 
                            message.toLowerCase().includes('insta') ||
                            message.toLowerCase().includes('social media') ||
                            message.toLowerCase().includes('update') ||
                            message.toLowerCase().includes('neuigkeit')) {
                            const banner = `
                                <div class="instagram-banner">
                                    <p>Folgen Sie uns auf Instagram f√ºr Updates und Tipps!</p>
                                    <a href="https://instagram.com/gittertierpro" target="_blank">
                                        <i class="fab fa-instagram"></i> @gittertierpro
                                    </a>
                                </div>
                            `;
                            
                            // Add a small delay before showing the banner
                            setTimeout(() => {
                                const bannerElement = document.createElement('div');
                                bannerElement.innerHTML = banner;
                                chatContainer.appendChild(bannerElement);
                                chatContainer.scrollTop = chatContainer.scrollHeight;
                            }, 500);
                        }
                        
                        // Add contact banner for support-related questions or default responses
                        if (message.toLowerCase().includes('support') || 
                            message.toLowerCase().includes('hilfe') ||
                            message.toLowerCase().includes('problem') ||
                            message.toLowerCase().includes('fehler') ||
                            message.toLowerCase().includes('kontakt') ||
                            message.toLowerCase().includes('passwort vergessen') ||
                            response.answer.includes('nicht vollst√§ndig verstanden')) {
                            
                            const banner = `
                                <div class="contact-banner">
                                    <p>Ben√∂tigen Sie pers√∂nlichen Support?</p>
                                    <a href="${generateSupportEmail('Supportanfrage: ' + message.substring(0, 30) + '...')}">
                                        <i class="fas fa-envelope"></i> Support kontaktieren
                                    </a>
                                </div>
                            `;
                            
                            setTimeout(() => {
                                const bannerElement = document.createElement('div');
                                bannerElement.innerHTML = banner;
                                chatContainer.appendChild(bannerElement);
                                chatContainer.scrollTop = chatContainer.scrollHeight;
                            }, 500);
                        }
                    }
                }
            }, 1500);
        }
        
        // Allow sending message with Enter key
        aiInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        // Auto-resize textarea
        aiInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
        
        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === aiModal) {
                closeAIModal();
            }
            if (e.target === sourcesModal) {
                closeSourcesModal();
            }
            if (e.target === blockOverlay) {
                // Prevent closing block modal by clicking overlay
                e.stopPropagation();
            }
        });
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is blocked
            checkUserBlocked();
        });
    </script>
</body>
</html>